<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Life Productivity</title>
    <style>
        /* Basic reset and style */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
        }
        header h1 {
            margin: 0;
            font-size: 24px;
        }
        #user-info {
            margin-left: 20px;
            font-size: 16px;
        }
        #user-info span {
            margin-right: 10px;
        }
        #theme-select {
            margin-left: auto;
        }
        main {
            padding: 10px;
        }
        .sections {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        section {
            background: #f0f0f0;
            padding: 10px;
            margin: 10px;
            flex: 1 1 300px;
            border-radius: 5px;
        }
        section h2 {
            text-align: center;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            background: white;
            margin: 5px 0;
            padding: 5px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        li.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }
        .task-info {
            display: flex;
            flex-direction: column;
        }
        .task-title {
            font-weight: bold;
        }
        .task-detail, .task-tagline {
            font-size: 0.9em;
            color: #666;
        }
        .task-points {
            margin-left: 10px;
            font-size: 0.9em;
            color: #333;
        }
        button {
            margin-left: 5px;
        }
        progress {
            width: 100%;
            height: 20px;
        }
        /* Theme styles */
        body.light {
            background-color: white;
            color: black;
        }
        body.dark {
            background-color: #121212;
            color: #eee;
        }
        body.dark header {
            background-color: #333;
        }
        body.halloween {
            background-color: #f39c12; /* orange */
            color: #2c3e50;
        }
        body.halloween header {
            background-color: #e67e22;
        }
        body.dark section {
            background: #222;
        }
        body.dark li {
            background: #333;
            border-color: #444;
        }
        body.halloween section {
            background: #f7dc6f;
        }
        body.halloween li {
            background: #f9e79f;
            border-color: #f1c40f;
        }
        @media (max-width: 600px) {
            .sections {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Life Productivity</h1>
        <div id="user-info">
            <span id="points-display">Points: 0</span>
            <span id="rank-display">Rank: 1</span>
        </div>
        <div>
            <label for="theme-select">Theme: </label>
            <select id="theme-select">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="halloween">Halloween</option>
            </select>
        </div>
    </header>
    <main>
        <div class="sections">
            <section>
                <h2>Personal</h2>
                <progress id="personal-progress" value="0" max="0"></progress>
                <p id="personal-progress-text">0/0 Tasks Completed</p>
                <ul id="personal-list"></ul>
            </section>
            <section>
                <h2>Home</h2>
                <progress id="home-progress" value="0" max="0"></progress>
                <p id="home-progress-text">0/0 Tasks Completed</p>
                <ul id="home-list"></ul>
            </section>
            <section>
                <h2>School</h2>
                <progress id="school-progress" value="0" max="0"></progress>
                <p id="school-progress-text">0/0 Tasks Completed</p>
                <ul id="school-list"></ul>
            </section>
            <section>
                <h2>Work</h2>
                <progress id="work-progress" value="0" max="0"></progress>
                <p id="work-progress-text">0/0 Tasks Completed</p>
                <ul id="work-list"></ul>
            </section>
            <section>
                <h2>Community</h2>
                <progress id="community-progress" value="0" max="0"></progress>
                <p id="community-progress-text">0/0 Tasks Completed</p>
                <ul id="community-list"></ul>
            </section>
        </div>
    </main>
    <script>
        // Predefined tasks for initialization
        const initialTasks = [
            {title: "Morning stretch", detail: "10 minutes", points: 5, tagline: "Energy", section: "personal", completed: false},
            {title: "Set daily goal", detail: "Write one goal for today", points: 2, tagline: "Clarity", section: "personal", completed: false},
            {title: "Do dishes", detail: "", points: 3, tagline: "Clean sink", section: "home", completed: false},
            {title: "Sweep floor", detail: "", points: 3, tagline: "Tidy kitchen", section: "home", completed: false},
            {title: "Fold clothes", detail: "", points: 4, tagline: "Neat closet", section: "home", completed: false},
            {title: "Tidy one area", detail: "5 minutes", points: 2, tagline: "Neat space", section: "home", completed: false},
            {title: "Review notes", detail: "", points: 6, tagline: "Better grades", section: "school", completed: false},
            {title: "Plan study session", detail: "30 minutes", points: 4, tagline: "Progress", section: "school", completed: false},
            {title: "Email updates", detail: "", points: 5, tagline: "Stay aligned", section: "work", completed: false},
            {title: "Plan tomorrow tasks", detail: "5 minutes", points: 3, tagline: "Stay organized", section: "work", completed: false},
            {title: "Volunteer check", detail: "", points: 6, tagline: "Give back", section: "community", completed: false},
            {title: "Connect with neighbor", detail: "Say hello or help", points: 3, tagline: "Goodwill", section: "community", completed: false}
        ];
        // Retrieve tasks from localStorage (or empty array)
        function getTasks() {
            return JSON.parse(localStorage.getItem('tasks')) || [];
        }
        // Save tasks to localStorage
        function saveTasks(tasks) {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }
        // Initialize tasks for a new user
        function initializeTasks() {
            if (!localStorage.getItem('tasksInitialized')) {
                initialTasks.forEach(task => {
                    task.id = Date.now() + Math.random();
                });
                saveTasks(initialTasks);
                localStorage.setItem('tasksInitialized', 'true');
            }
        }
        // Render tasks in each section
        function renderTasks() {
            const tasks = getTasks();
            // Clear existing lists
            ["personal", "home", "school", "work", "community"].forEach(sec => {
                document.getElementById(sec + "-list").innerHTML = "";
            });
            // Populate lists
            tasks.forEach(task => {
                const li = document.createElement('li');
                li.dataset.id = task.id;
                if (task.completed) li.classList.add('completed');
                // Task info container
                const infoDiv = document.createElement('div');
                infoDiv.className = "task-info";
                const titleSpan = document.createElement('span');
                titleSpan.className = "task-title";
                titleSpan.textContent = task.title;
                infoDiv.appendChild(titleSpan);
                if (task.detail) {
                    const detailSpan = document.createElement('span');
                    detailSpan.className = "task-detail";
                    detailSpan.textContent = task.detail;
                    infoDiv.appendChild(detailSpan);
                }
                if (task.tagline) {
                    const taglineSpan = document.createElement('span');
                    taglineSpan.className = "task-tagline";
                    taglineSpan.textContent = task.tagline;
                    infoDiv.appendChild(taglineSpan);
                }
                // Points display
                const pointsSpan = document.createElement('span');
                pointsSpan.className = "task-points";
                pointsSpan.textContent = task.points + " pts";
                // Left container for info + points
                const leftDiv = document.createElement('div');
                leftDiv.style.display = 'flex';
                leftDiv.style.alignItems = 'center';
                leftDiv.appendChild(infoDiv);
                leftDiv.appendChild(pointsSpan);
                // Buttons container
                const btnDiv = document.createElement('div');
                const completeBtn = document.createElement('button');
                completeBtn.textContent = task.completed ? "Undo" : "Complete";
                completeBtn.addEventListener('click', () => toggleComplete(task.id));
                btnDiv.appendChild(completeBtn);
                const editBtn = document.createElement('button');
                editBtn.textContent = "Edit";
                editBtn.addEventListener('click', () => editTask(task.id));
                btnDiv.appendChild(editBtn);
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = "Delete";
                deleteBtn.addEventListener('click', () => deleteTask(task.id));
                btnDiv.appendChild(deleteBtn);
                // Assemble list item
                li.appendChild(leftDiv);
                li.appendChild(btnDiv);
                const listElem = document.getElementById(task.section + "-list");
                if (listElem) listElem.appendChild(li);
            });
            updateProgress();
            updatePointsAndRank();
        }
        // Toggle task completion status
        function toggleComplete(id) {
            let tasks = getTasks();
            tasks.forEach(task => {
                if (task.id == id) {
                    task.completed = !task.completed;
                }
            });
            saveTasks(tasks);
            renderTasks();
        }
        // Edit a task's details
        function editTask(id) {
            let tasks = getTasks();
            tasks.forEach(task => {
                if (task.id == id) {
                    let newTitle = prompt("Enter new title:", task.title);
                    if (newTitle !== null) task.title = newTitle;
                    let newDetail = prompt("Enter new detail/time:", task.detail);
                    if (newDetail !== null) task.detail = newDetail;
                    let newTagline = prompt("Enter new tagline:", task.tagline);
                    if (newTagline !== null) task.tagline = newTagline;
                    let newPoints = prompt("Enter new points value:", task.points);
                    if (newPoints !== null) {
                        let parsed = parseInt(newPoints);
                        if (!isNaN(parsed)) task.points = parsed;
                    }
                }
            });
            saveTasks(tasks);
            renderTasks();
        }
        // Delete a task
        function deleteTask(id) {
            let tasks = getTasks();
            tasks = tasks.filter(task => task.id != id);
            saveTasks(tasks);
            renderTasks();
        }
        // Update progress bars and text for each section
        function updateProgress() {
            const sections = ["personal", "home", "school", "work", "community"];
            const tasks = getTasks();
            sections.forEach(sec => {
                const secTasks = tasks.filter(task => task.section === sec);
                const total = secTasks.length;
                const completedCount = secTasks.filter(task => task.completed).length;
                const progressElem = document.getElementById(sec + "-progress");
                const textElem = document.getElementById(sec + "-progress-text");
                if (progressElem) {
                    progressElem.max = total;
                    progressElem.value = completedCount;
                }
                if (textElem) {
                    textElem.textContent = completedCount + "/" + total + " Tasks Completed";
                }
            });
        }
        // Calculate and display total points and rank
        function updatePointsAndRank() {
            const tasks = getTasks();
            const totalPoints = tasks.reduce((sum, task) => sum + (task.completed ? task.points : 0), 0);
            document.getElementById("points-display").textContent = "Points: " + totalPoints;
            const rank = Math.floor(totalPoints / 10) + 1;
            document.getElementById("rank-display").textContent = "Rank: " + rank;
        }
        // Theme setup and persistence
        function setupTheme() {
            const select = document.getElementById('theme-select');
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.className = savedTheme;
            select.value = savedTheme;
            select.addEventListener('change', () => {
                const theme = select.value;
                document.body.className = theme;
                localStorage.setItem('theme', theme);
            });
        }
        // Initialize and render on page load
        initializeTasks();
        document.addEventListener('DOMContentLoaded', () => {
            setupTheme();
            renderTasks();
        });
    </script>
</body>
</html>
